<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>大阪旅行（1/17～1/19）グルメ検索アプリ</title>
    <meta name="description" content="大阪出張の旅行計画マップ。グルメ店をジャンル別に表示し、観光スポットも確認できます。">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">

    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="styles.css">

    <!-- PWA Helper -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#0f0f1a">
    <link rel="apple-touch-icon" href="icon-192.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="大阪旅行">
</head>

<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <span class="logo-icon">🗾</span>
                    <h1>大阪旅行（1/17～1/19）グルメ検索アプリ</h1>
                </div>
                <div class="trip-info">
                    <span class="trip-date">Created by Fujiwara</span>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Sidebar -->
            <aside class="sidebar" id="sidebar">
                <div class="sidebar-header">
                    <h2>🍽️ グルメ・観光スポット</h2>
                    <button class="toggle-sidebar" id="toggleSidebar">◀</button>
                </div>

                <!-- Filter Section -->
                <div class="filter-section">
                    <h3>ジャンルフィルター</h3>
                    <div class="filter-grid" id="filterGrid">
                        <!-- Filters will be generated by JavaScript -->
                    </div>
                    <div class="filter-actions">
                        <button class="btn btn-outline" id="selectAll">すべて選択</button>
                        <button class="btn btn-outline" id="deselectAll">すべて解除</button>
                    </div>
                </div>

                <!-- Spots List -->
                <div class="spots-section">
                    <h3>スポット一覧 <span class="spot-count" id="spotCount">(0)</span></h3>
                    <div class="spots-list" id="spotsList">
                        <!-- Spots will be generated by JavaScript -->
                    </div>
                </div>
            </aside>

            <!-- Map Container -->
            <div class="map-container">
                <!-- Sidebar Open Button (visible when sidebar is collapsed) -->
                <button class="sidebar-open-btn" id="sidebarOpenBtn" style="display: none;">▶</button>
                <div id="map"></div>
                <div class="map-legend" id="mapLegend">
                    <h4>凡例</h4>
                    <div class="legend-items" id="legendItems">
                        <!-- Legend items will be generated by JavaScript -->
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <!-- Custom JS -->
    <script src="app.js"></script>

    <!-- PWA Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./service-worker.js')
                    .then(registration => {
                        console.log('ServiceWorker registration successful with scope: ', registration.scope);
                    }, err => {
                        console.log('ServiceWorker registration failed: ', err);
                    });
            });
        }
    </script>
</body>

</html>
